<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Home</title>
    
    
    <!-- The core Firebase JS SDK is always required and must be listed first -->
    <script src="https://www.gstatic.com/firebasejs/8.4.1/firebase-app.js"></script>

    <!-- TODO: Add SDKs for Firebase products that you want to use
        https://firebase.google.com/docs/web/setup#available-libraries -->
    <script src="https://www.gstatic.com/firebasejs/8.4.1/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.4.1/firebase-analytics.js"></script>

    <script>
        // Your web app's Firebase configuration
        // For Firebase JS SDK v7.20.0 and later, measurementId is optional
        var firebaseConfig = {
            apiKey: "AIzaSyBfMtsyBwnJYR9DhXi1YzrAKwlFToxsnCg",
            authDomain: "fir-test-7b227.firebaseapp.com",
            projectId: "fir-test-7b227",
            storageBucket: "fir-test-7b227.appspot.com",
            messagingSenderId: "178901212563",
            appId: "1:178901212563:web:550f14d238574a85469c66",
            measurementId: "G-XF6MNFQ9KX"
        };
        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
        firebase.analytics();
    </script>

    <script src="https://www.gstatic.com/firebasejs/ui/4.8.0/firebase-ui-auth.js"></script>
    <link type="text/css" rel="stylesheet" href="https://www.gstatic.com/firebasejs/ui/4.8.0/firebase-ui-auth.css" />

    <link type="text/css" rel="stylesheet" href="https://www.gstatic.com/firebasejs/ui/4.8.0/firebase-ui-auth.css" />
    <script type="text/javascript">
      // FirebaseUI config.
      var uiConfig = {
        signInSuccessUrl: 'success.html',
        signInOptions: [
          firebase.auth.EmailAuthProvider.PROVIDER_ID,
        ],
      };

      document.addEventListener("DOMContentLoaded", function() {
        var user = firebase.auth().currentUser;
        if (user)  // if logged in
        {
          alert("logged in");
          document.querySelector(h2).innerHTML = "Signed in as " + user.displayName + ". You will be redirected in 3 seconds..."
          sleep(3000).then(() => {
            window.location.replace("success.html");
          });
        }
        else
        {
          alert("Starting login");
          // Initialize the FirebaseUI Widget using Firebase.
          var ui = new firebaseui.auth.AuthUI(firebase.auth());
          // The start method will wait until the DOM is loaded.
          ui.start('#firebaseui-auth-container', uiConfig);
        }
      });
      
      
    </script>

    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- The surrounding HTML is left untouched by FirebaseUI.
     Your app may use that space for branding, controls and other customizations.-->
    <h1 align="center">Welcome to Mobinfo</h1>
    <h2>Sign in to continue:</h2>
    <div id="firebaseui-auth-container"></div>
    <div contenteditable="true">hi</div>


    <script>
      firebase.auth().onAuthStateChanged(function(user) {
          if (user)
          {
            window.location = "http://127.0.0.1:5500/Firebase-Web-Test/success.html";
          }
        });
    </script>
</body>
</html>